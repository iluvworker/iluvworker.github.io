<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>母音＋「…」びよーんジェネレータ</title>
<meta name="robots" content="noindex,nofollow" />
<style>
  body{
    font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN",sans-serif;
    background:#0f172a;
    color:#e6eef8;
    margin:0;
    padding:20px;
  }
  h1{font-size:18px;margin-bottom:8px;}
  h2{font-size:14px;margin:14px 0 4px;}
  label{font-size:12px;color:#9fb7f8;display:block;margin-top:6px;}
  textarea,input{
    font-family:inherit;
    font-size:13px;
  }
  textarea{
    width:100%;
    box-sizing:border-box;
    min-height:48px;
    border-radius:8px;
    border:none;
    padding:6px 8px;
    background:#101c3b;
    color:#fff;
    margin-top:3px;
  }
  input[type="number"]{
    box-sizing:border-box;
    width:100%;
    max-width:120px;
    border-radius:6px;
    border:none;
    padding:4px 6px;
    background:#101c3b;
    color:#fff;
    margin-top:3px;
  }
  button{
    margin-top:10px;
    margin-right:6px;
    padding:6px 12px;
    border-radius:6px;
    border:none;
    background:#2563eb;
    color:#fff;
    cursor:pointer;
    font-size:13px;
  }
  button:hover{opacity:.9;}
  .counter{
    font-size:12px;
    color:#9fb7f8;
    text-align:right;
    margin-top:4px;
  }
  .row{
    display:flex;
    flex-wrap:wrap;
    gap:12px 20px;
    margin-top:6px;
  }
</style>
</head>
<body>
<h1>母音＋「…」びよーんジェネレータ</h1>

<section>
  <h2>① ベース文字列</h2>
  <label for="baseText">記号や「っ」「ん」はそのまま／母音だけ伸ばします</label>
  <textarea id="baseText" placeholder="例：あっ♡あんっ♡"></textarea>
</section>

<section>
  <h2>② パラメータ</h2>
  <div class="row">
    <div>
      <label for="targetLen">目標文字数（だいたい）</label>
      <input id="targetLen" type="number" value="16" min="4" />
    </div>
    <div>
      <label for="repeatMax">同じ母音の最大連続回数</label>
      <input id="repeatMax" type="number" value="4" min="1" />
    </div>
    <div>
      <label for="dotsMax">母音の後に付ける「…」最大個数</label>
      <input id="dotsMax" type="number" value="3" min="0" />
    </div>
  </div>
</section>

<section>
  <h2>③ 生成結果</h2>
  <button onclick="generateOnce()">1回生成</button>
  <button onclick="generateOnce();copyResult()">生成してコピー</button>
  <textarea id="resultText" placeholder="ここに生成結果が出ます"></textarea>
  <div class="counter">文字数：<span id="resultLen">0</span></div>
</section>

<script>
function randomInt(min, max){
  min = Math.floor(min);
  max = Math.floor(max);
  if(max < min){ [min, max] = [max, min]; }
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function randomInt(min, max){
  min = Math.floor(min);
  max = Math.floor(max);
  if(max < min){ [min, max] = [max, min]; }
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

function randomPick(arr){
  return arr[Math.floor(Math.random() * arr.length)];
}

function generateOnce(){
  const base      = document.getElementById("baseText").value || "";
  const targetLen = Number(document.getElementById("targetLen").value || 16);
  const repeatMax = Number(document.getElementById("repeatMax").value || 3);
  const dotsMax   = Number(document.getElementById("dotsMax").value || 0);

  // 「伸ばす対象」の母音（ここではひらがなだけに絞る）
  const vowelRegex = /[あいうえおぁぃぅぇぉ]/u;

  // 大文字⇔小文字の候補テーブル
  const vowelMap = {
    "あ": ["あ", "ぁ"],
    "い": ["い", "ぃ"],
    "う": ["う", "ぅ"],
    "え": ["え", "ぇ"],
    "お": ["お", "ぉ"],
    "ぁ": ["ぁ"],
    "ぃ": ["ぃ"],
    "ぅ": ["ぅ"],
    "ぇ": ["ぇ"],
    "ぉ": ["ぉ"]
  };

  let out = "";

  for(const ch of base){
    if(vowelRegex.test(ch)){
      // この母音用の候補（大＆小）
      const candidates = vowelMap[ch] || [ch];

      // 何文字分伸ばすか
      const r = randomInt(1, repeatMax);

      // その回数ぶん、大文字or小文字をランダムで吐く
      for(let i = 0; i < r; i++){
        out += randomPick(candidates);
      }

      // ランダムで「…」を 0〜dotsMax 個 挟む
      if(dotsMax > 0){
        const dotCount = randomInt(0, dotsMax);
        if(dotCount > 0){
          out += "…".repeat(dotCount);
        }
      }
    }else{
      // 母音以外（っ、♡、ん など）はそのまま
      out += ch;
    }

    // 目標よりだいぶ超えたら軽くカット
    if(out.length > targetLen + 4){
      break;
    }
  }

  const res = document.getElementById("resultText");
  res.value = out;
  document.getElementById("resultLen").innerText = out.length;
}

function copyResult(){
  const res = document.getElementById("resultText");
  res.select();
  document.execCommand("copy");
}

document.getElementById("resultText").addEventListener("input", () => {
  document.getElementById("resultLen").innerText =
    document.getElementById("resultText").value.length;
});
</script>
</body>
</html>
