<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>んもうダメジェネレータ（語尾びよ〜ん）</title>
<meta name="robots" content="noindex,nofollow" />
<style>
  body{
    font-family:-apple-system,BlinkMacSystemFont,"Hiragino Kaku Gothic ProN",sans-serif;
    background:#0f172a;
    color:#e6eef8;
    margin:0;
    padding:20px;
  }
  h1{font-size:18px;margin-bottom:8px;}
  h2{font-size:14px;margin:14px 0 4px;}
  label{font-size:12px;color:#9fb7f8;display:block;margin-top:6px;}
  textarea,input{
    font-family:inherit;
    font-size:13px;
  }
  textarea{
    width:100%;
    box-sizing:border-box;
    min-height:48px;
    border-radius:8px;
    border:none;
    padding:6px 8px;
    background:#101c3b;
    color:#fff;
    margin-top:3px;
  }
  input[type="number"],input[type="text"]{
    box-sizing:border-box;
    width:100%;
    max-width:120px;
    border-radius:6px;
    border:none;
    padding:4px 6px;
    background:#101c3b;
    color:#fff;
    margin-top:3px;
  }
  .row{
    display:flex;
    flex-wrap:wrap;
    gap:12px 20px;
    margin-top:6px;
  }
  button{
    margin-top:10px;
    margin-right:6px;
    padding:6px 12px;
    border-radius:6px;
    border:none;
    background:#2563eb;
    color:#fff;
    cursor:pointer;
    font-size:13px;
  }
  button:hover{opacity:.9;}
  .counter{
    font-size:12px;
    color:#9fb7f8;
    text-align:right;
    margin-top:4px;
  }
</style>
</head>
<body>
<h1>んもうダメジェネレータ（語尾びよ〜ん）</h1>

<section>
  <h2>① 元のセリフ</h2>
  <label for="baseText">ベースのセリフ</label>
  <textarea id="baseText" placeholder="例：もうダメ…"></textarea>
</section>

<section>
  <h2>② 母音の伸ばし方</h2>
  <div class="row">
    <div>
      <label for="vowelMin">母音の最小伸ばし回数</label>
      <input id="vowelMin" type="number" value="2" min="1" />
    </div>
    <div>
      <label for="vowelMax">母音の最大伸ばし回数</label>
      <input id="vowelMax" type="number" value="5" min="1" />
    </div>
  </div>
</section>

<section>
  <h2>③ 語尾の「っ」と装飾</h2>
  <div class="row">
    <div>
      <label for="tsuMin">語尾「っ」の最小回数</label>
      <input id="tsuMin" type="number" value="0" min="0" />
    </div>
    <div>
      <label for="tsuMax">語尾「っ」の最大回数</label>
      <input id="tsuMax" type="number" value="3" min="0" />
    </div>
  </div>
  <label for="tailText">末尾につける文字（例：…っ////）</label>
  <input id="tailText" type="text" value="…っ////" />
</section>

<section>
  <h2>④ 生成結果</h2>
  <button onclick="generateOnce()">1回生成</button>
  <button onclick="generateOnce();copyResult()">生成してコピー</button>
  <textarea id="resultText" placeholder="ここに生成結果が出ます"></textarea>
  <div class="counter">文字数：<span id="resultLen">0</span></div>
</section>

<script>
  // 日本語の母音っぽい文字たち
  const vowelRegex = /[あいうえおアイウエオぁぃぅぇぉァィゥェォー]/u;

  function randomInt(min, max){
    min = Math.max(1, Number(min));
    max = Math.max(min, Number(max));
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function generateOnce(){
    const base = document.getElementById("baseText").value || "";
    let vMin = Number(document.getElementById("vowelMin").value || 1);
    let vMax = Number(document.getElementById("vowelMax").value || 1);
    let tMin = Number(document.getElementById("tsuMin").value || 0);
    let tMax = Number(document.getElementById("tsuMax").value || 0);
    const tail = document.getElementById("tailText").value || "";

    if(vMax < vMin){ [vMin, vMax] = [vMax, vMin]; }
    if(tMax < tMin){ [tMin, tMax] = [tMax, tMin]; }

    let out = "";

    // 1文字ずつ見て、母音ならランダム回数でびよ〜ん
    for(const ch of base){
      if(vowelRegex.test(ch)){
        const repeat = randomInt(vMin, vMax);
        out += ch.repeat(repeat);
      }else{
        out += ch;
      }
    }

    // 語尾の「っ」
    let tsuCount = 0;
    if(tMax > 0){
      tsuCount = randomInt(tMin, tMax);
    }
    if(tsuCount > 0){
      out += "っ".repeat(tsuCount);
    }

    // 末尾装飾
    out += tail;

    const res = document.getElementById("resultText");
    res.value = out;
    document.getElementById("resultLen").innerText = out.length;
  }

  function copyResult(){
    const res = document.getElementById("resultText");
    res.select();
    document.execCommand("copy");
  }

  // 手動でいじったとき用の文字数カウント
  document.getElementById("resultText").addEventListener("input", () => {
    document.getElementById("resultLen").innerText =
      document.getElementById("resultText").value.length;
  });
</script>
</body>
</html>
